{% extends 'base.html' %} {% load static %} {% block content %}

<div class="main-content">
  <!-- Top Bar -->
  <div class="topbar">
    <div class="page-title">Community Resilience & Climate Risk Intelligence</div>
    <div class="toolbar">
      <div class="notification-icon" title="Click to See Risk zone">
        <a href="{% url 'notifications' %}"><i class="fas fa-bell"></i></a>
        <div class="notification-badge">3</div>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="page active" id="dashboard-page">
    <div class="content">
      <!-- KPI Section -->
      <div class="kpi-section">
        <div class="section-header">
          <div class="section-title">Current Hazard Overview</div>
          <div class="time-filter">
            <i class="fas fa-calendar-alt"></i>
            Last 30 Days
          </div>
        </div>

        <div class="card-grid">
          <div class="card kpi-card">
            <div class="kpi-icon flood"><i class="fas fa-water"></i></div>
            <div class="kpi-content">
              <div id="kpi-flood-value" class="kpi-value">...</div>
              <div class="kpi-label">Flood Events</div>
            </div>
          </div>

          <div class="card kpi-card">
            <div class="kpi-icon drought"><i class="fas fa-sun"></i></div>
            <div class="kpi-content">
              <div id="kpi-drought-value" class="kpi-value">...</div>
              <div class="kpi-label">Drought Alerts</div>
            </div>
          </div>

          <div class="card kpi-card">
            <div class="kpi-icon landslide"><i class="fas fa-mountain"></i></div>
            <div class="kpi-content">
              <div id="kpi-landslide-value" class="kpi-value">...</div>
              <div class="kpi-label">Landslide Risks</div>
            </div>
          </div>

          <div class="card kpi-card">
            <div class="kpi-icon zone"><i class="fas fa-exclamation-triangle"></i></div>
            <div class="kpi-content">
              <div id="kpi-total-value" class="kpi-value">...</div>
              <div class="kpi-label">Total Events</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Hazard Zones Map -->
      <div class="main-grid">
        <div class="map-section">
          <div class="section-header">
            <div class="section-title">Regional Hazard Map</div>
          </div>
          <div class="map-control">
            <div class="map-filter-group">
              <label for="province-filter">Province:</label>
              <select id="province-filter">
                <option value="all">All Provinces</option>
              </select>
            </div>
            <div class="map-filter-group">
              <label for="subtype-filter">Disaster Type:</label>
              <select id="subtype-filter">
                <option value="all">All Types</option>
              </select>
            </div>
            <div class="map-filter-group">
              <label for="year-filter">Year:</label>
              <select id="year-filter">
                <option value="all">All Years</option>
              </select>
            </div>
          </div>
          <div class="map-container">
            <div id="map" style="height: 450px; width: 100%"></div>
          </div>
          <div class="map-legend">
            <div class="legend-item">
              <div class="legend-color flood"></div>
              <span>Flood Zones</span>
            </div>
            <div class="legend-item">
              <div class="legend-color drought"></div>
              <span>Drought Zones</span>
            </div>
            <div class="legend-item">
              <div class="legend-color landslide"></div>
              <span>Landslide Areas</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Alerts -->
      <div class="alert-section">
        <div class="alert-header">
          <div class="alert-title">Real-time Alerts</div>
          <div class="view-all">
            View All
            <i class="fas fa-angle-right"></i>
          </div>
        </div>

        <div class="alerts-container">
          <div class="alert-card critical">
            <div class="alert-type critical">
              <i class="fas fa-exclamation-circle"></i>
              EMERGENCY ALERT
            </div>
            <div class="alert-message">Major flood warning for Zone A. Expected rainfall: 5 inches in next 24 hours. Evacuation advised.</div>
            <div class="alert-time">10 minutes ago</div>
          </div>

          <div class="alert-card">
            <div class="alert-type">
              <i class="fas fa-mountain"></i>
              LANDSLIDE WARNING
            </div>
            <div class="alert-message">High risk of landslides in Hillside District. Avoid travel in this area until situation improves.</div>
            <div class="alert-time">2 hours ago</div>
          </div>

          <div class="alert-card">
            <div class="alert-type">
              <i class="fas fa-sun"></i>
              DROUGHT WARNING
            </div>
            <div class="alert-message">Drought conditions worsening in Northern Region. Water conservation measures in effect.</div>
            <div class="alert-time">5 hours ago</div>
          </div>

          <div class="alert-card">
            <div class="alert-type">
              <i class="fas fa-water"></i>
              FLOOD WATCH
            </div>
            <div class="alert-message">Potential flooding in coastal areas. Monitor local conditions and prepare emergency kits.</div>
            <div class="alert-time">Yesterday</div>
          </div>
        </div>
      </div>

      <!-- Community Resilience Checklist -->
      <div class="checklist-section">
        <div class="section-header"><div class="section-title">Community Resilience Checklist</div></div>
        <div class="checklist-grid">
          <div class="checklist-card">
            <div class="checklist-header"><div class="checklist-title">Risk Assessment</div></div>
            <ul class="checklist-items">
              <li class="checklist-item">
                <input type="checkbox" id="check1" checked />
                <label for="check1">Conduct community surveys</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check2" />
                <label for="check2">Map vulnerable areas</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check3" checked />
                <label for="check3">Identify high-risk populations</label>
              </li>
            </ul>
          </div>
          <div class="checklist-card">
            <div class="checklist-header"><div class="checklist-title">Emergency Response</div></div>
            <ul class="checklist-items">
              <li class="checklist-item">
                <input type="checkbox" id="check4" />
                <label for="check4">Establish evacuation routes</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check5" checked />
                <label for="check5">Set up emergency shelters</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check6" />
                <label for="check6">Train response teams</label>
              </li>
            </ul>
          </div>
          <div class="checklist-card">
            <div class="checklist-header"><div class="checklist-title">Infrastructure Prep</div></div>
            <ul class="checklist-items">
              <li class="checklist-item">
                <input type="checkbox" id="check7" />
                <label for="check7">Reinforce flood barriers</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check8" checked />
                <label for="check8">Water storage solutions</label>
              </li>
              <li class="checklist-item">
                <input type="checkbox" id="check9" />
                <label for="check9">Soil stabilization projects</label>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
